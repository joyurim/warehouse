{"ast":null,"code":"import { defineComponent } from 'vue';\nexport default defineComponent({\n  name: \"RecommendProduct\",\n  data() {\n    return {\n      shouldRender: false,\n      hasError: false,\n      itemId: '',\n      recentItem: {\n        name: \"마이 디어 워셔블 13mm 무지 포인트 사계절 원형 러그\",\n        brandName: \"thefrigg\",\n        brandId: \"thefrigg\",\n        discountText: '10%',\n        image: \"https://webimage.10x10.co.kr/image/basic600/454/B004549611.jpg\",\n        isCoupon: \"Y\",\n        isDiscount: \"N\",\n        itemId: 4549611,\n        originPrice: 47500,\n        price: 42750,\n        reviewCount: 1245,\n        reviewScore: \"5.00\",\n        reviewComment: `조카 선물로 샌드위치 메이커랑 구매했어요!`,\n        secretCoupon: {\n          estimatedAmount: 23750,\n          couponId: 4090,\n          couponName: \"test 할인의 참견 시크릿 쿠폰 2\",\n          discountAmount: 23750\n        }\n      },\n      currentCursor: -1,\n      isLoading: true,\n      isLastPage: false,\n      size: 20,\n      togetherItems: [],\n      isFirstLoading: true\n    };\n  },\n  watch: {\n    isLoading(newLoading) {\n      if (newLoading) {\n        this.fetchItems(this.itemId);\n      }\n    }\n  },\n  mounted() {\n    const itemId = this.recentItem.itemId;\n    this.shouldRender = true;\n    this.fetchItems(itemId);\n  },\n  methods: {\n    async fetchItems(itemId) {\n      let isResolve = false;\n      try {\n        const response = await fetch(`https://gateway.10x10.co.kr/v1/product/apis/product/from-ad/${itemId}/recommendations/${this.currentCursor}/${this.size}`, {\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        });\n        if (response.ok) {\n          const json = await response.json();\n          if (json.status === 200 && json.message === 'success') {\n            this.isLastPage = json.result.results.length <= 0;\n            this.togetherItems = [...this.togetherItems, ...json.result.results];\n            this.currentCursor = json.result.cursor;\n            isResolve = true;\n          }\n        } else {\n          this.isLoading = false;\n        }\n        this.isLoading = false;\n      } catch (e) {\n        isResolve = false;\n      }\n    },\n    handleScroll() {\n      const maxPivot = Math.max(window.scrollY, Math.ceil(window.scrollY));\n      const isAtTheBottom = maxPivot >= document.body.scrollHeight - document.body.offsetHeight;\n      if (isAtTheBottom && !this.isLastPage) {\n        this.isLoading = true;\n      }\n    },\n    numberFormat(price) {\n      const floorPrice = Math.floor(price);\n      return floorPrice.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n    },\n    moveToLink(code) {\n      let url = '';\n      url = `https://m.10x10.co.kr/category/category_itemPrd.asp?itemid=${code}`;\n      return location.href = url;\n    }\n  }\n});","map":{"version":3,"names":["defineComponent","name","data","shouldRender","hasError","itemId","recentItem","brandName","brandId","discountText","image","isCoupon","isDiscount","originPrice","price","reviewCount","reviewScore","reviewComment","secretCoupon","estimatedAmount","couponId","couponName","discountAmount","currentCursor","isLoading","isLastPage","size","togetherItems","isFirstLoading","watch","newLoading","fetchItems","mounted","methods","isResolve","response","fetch","method","headers","ok","json","status","message","result","results","length","cursor","e","handleScroll","maxPivot","Math","max","window","scrollY","ceil","isAtTheBottom","document","body","scrollHeight","offsetHeight","numberFormat","floorPrice","floor","toString","replace","moveToLink","code","url","location","href"],"sources":["/Users/10x10/Desktop/yurim/warehouse/src/components/work/RecommendProduct.vue"],"sourcesContent":["<template>\n  <section v-if=\"shouldRender\">\n    <div v-if=\"hasError\" class=\"error\">\n      <div class=\"image-container\">\n        <img src=\"@/assets/common/img__error.svg\" alt=\"error\" />\n      </div>\n      <p class=\"error__message\">요청하신 페이지를 찾을 수 없습니다.</p>\n      <button type=\"button\" class=\"btnHome\">\n        <router-link to=\"/\">홈으로가기</router-link>\n      </button>\n    </div>\n    <div v-else ref=\"recommend\" class=\"recommend\">\n      <section class=\"recent__container\">\n        <h1 class=\"recommend__title\">고객님이<br/>방금 본 상품이에요!</h1>\n        <div class=\"recent\">\n          <figure class=\"thumbnail\">\n            <img :src=\"recentItem.image\" :alt=\"recentItem.name\">\n          </figure>\n          <div class=\"recent-info\">\n            <p class=\"brand\">{{recentItem.brandName}}</p>\n            <p class=\"name\">{{recentItem.name}}</p>\n            <p v-if=\"recentItem.discountText\" class=\"originPrice\">{{numberFormat(recentItem.originPrice)}}</p>\n            <p class=\"priceBox\">\n              <span v-if=\"recentItem.discountText\" class=\"percent\">{{recentItem.discountText}}</span>\n              <span class=\"price\">{{numberFormat(recentItem.price)}}</span>\n            </p>\n            <div v-if=\"recentItem.reviewCount\" class=\"review\">\n              <div class=\"review__eval\">\n                <span class=\"review__eval--sprite-rating\" :style=\"'width:' + (recentItem.reviewScore*20) + '%;'\" />\n              </div>\n              <span class=\"review__count\">\n                ({{numberFormat(recentItem.reviewCount)}})\n              </span>\n            </div>\n            <p v-if=\"recentItem.reviewCount\" class=\"review__comment\">\n              {{recentItem.reviewComment}}\n            </p>\n          </div>\n        </div>\n        <button type=\"button\" class=\"btnRecentMore\" @click=\"moveToLink(recentItem.itemId)\">자세히 보기</button>\n      </section>\n    </div>\n  </section>\n  <section v-if=\"this.togetherItems.length > 0\" id=\"recommendTitleContainer\" class=\"togetherContainer\">\n    <h1 class=\"recommendTitle\">다른 고객님들이<br/>함께 본 상품이에요!\n      <span class=\"recommendTitleSponsored\">Sponsored</span>\n    </h1>\n    <div class=\"togetherProductContainer\">\n      <div\n          v-for=\"(item, index) in togetherItems\"\n          :key=\"index\"\n          :data-item-id=\"item.itemid\"\n          class=\"togetherProduct\"\n          @click=\"moveToLink(item)\"\n      >\n        <figure class=\"thumbnail\">\n          <img :src=\"item.image\" :alt=\"item.name\">\n        </figure>\n        <div class=\"togetherProductInfo\">\n          <p class=\"brand\">{{item.brandName}}</p>\n          <p class=\"name\">{{item.name}}</p>\n          <p v-if=\"item.discountText\" class=\"originPrice\">{{numberFormat(item.originPrice)}}</p>\n          <p class=\"priceBox\">\n            <span v-if=\"item.discountText\" class=\"percent\">{{item.discountText}}</span>\n            <span class=\"price\">{{numberFormat(item.price)}}</span>\n          </p>\n          <div v-if=\"item.reviewCount\" class=\"review\">\n            <div class=\"reviewEval\">\n              <span class=\"reviewEvalSpriteRating\" :style=\"'width:' + (item.reviewScore*20) + '%;'\" />\n            </div>\n            <span class=\"reviewCount\">\n               {{numberFormat(item.reviewCount)}}\n            </span>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div v-if=\"isLoading\" class=\"togetherLoading\">\n      <div class=\"loader\"></div>\n    </div>\n  </section>\n</template>\n\n<script>\nimport {defineComponent} from 'vue'\n\nexport default defineComponent({\n  name: \"RecommendProduct\",\n  data() {\n    return {\n      shouldRender: false,\n      hasError: false,\n      itemId: '',\n      recentItem: {\n        name: \"마이 디어 워셔블 13mm 무지 포인트 사계절 원형 러그\",\n        brandName: \"thefrigg\",\n        brandId: \"thefrigg\",\n        discountText: '10%',\n        image: \"https://webimage.10x10.co.kr/image/basic600/454/B004549611.jpg\",\n        isCoupon: \"Y\",\n        isDiscount: \"N\",\n        itemId: 4549611,\n        originPrice: 47500,\n        price: 42750,\n        reviewCount: 1245,\n        reviewScore: \"5.00\",\n        reviewComment: `조카 선물로 샌드위치 메이커랑 구매했어요!`,\n        secretCoupon: {\n          estimatedAmount: 23750,\n          couponId: 4090,\n          couponName: \"test 할인의 참견 시크릿 쿠폰 2\",\n          discountAmount: 23750\n        },\n      },\n      currentCursor: -1,\n      isLoading: true,\n      isLastPage: false,\n      size: 20,\n      togetherItems: [],\n      isFirstLoading: true,\n    }\n  },\n  watch: {\n    isLoading(newLoading) {\n      if (newLoading) {\n        this.fetchItems(this.itemId);\n      }\n    },\n  },\n  mounted() {\n    const itemId = this.recentItem.itemId\n    this.shouldRender = true\n    this.fetchItems(itemId);\n  },\n  methods: {\n    async fetchItems(itemId) {\n      let isResolve = false;\n      try {\n        const response = await fetch(`https://gateway.10x10.co.kr/v1/product/apis/product/from-ad/${itemId}/recommendations/${this.currentCursor}/${this.size}`, {\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application/json',\n          }\n        });\n        if (response.ok) {\n          const json = await response.json();\n          if(json.status === 200 && json.message === 'success') {\n            this.isLastPage = json.result.results.length <= 0;\n            this.togetherItems = [...this.togetherItems, ...json.result.results];\n            this.currentCursor = json.result.cursor;\n            isResolve = true;\n          }\n        } else {\n          this.isLoading = false;\n        }\n        this.isLoading = false;\n      } catch (e) {\n        isResolve = false;\n      }\n    },\n    handleScroll() {\n      const maxPivot = Math.max(window.scrollY, Math.ceil(window.scrollY));\n      const isAtTheBottom = maxPivot >= document.body.scrollHeight - document.body.offsetHeight;\n      if(isAtTheBottom && !this.isLastPage) {\n        this.isLoading = true;\n      }\n    },\n    numberFormat(price) {\n      const floorPrice = Math.floor(price);\n      return floorPrice.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n    },\n    moveToLink(code) {\n      let url = '';\n      url = `https://m.10x10.co.kr/category/category_itemPrd.asp?itemid=${code}`;\n      return location.href = url;\n    },\n  }\n})\n</script>\n\n<style scoped lang=\"scss\">\n@import \"@/styles/work/recommendProduct.scss\";\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}